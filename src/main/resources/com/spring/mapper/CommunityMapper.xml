<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.spring.mapper.CommunityMapper">
  	<select id="selectCommunityList" resultType="com.spring.domain.CommunityDTO">
	    <![CDATA[
		 select * from (select ROWNUM as rn, c_no, title, content, reg_date, (select nickname from members where nickname=community.nickname) as nickname from community community where ROWNUM <=(1*10)) where rn >((1-1)*10)
		]]>
	</select>
  	
  	<select id="selectAllCommunityByPage" resultType="com.spring.domain.CommunityDTO">
  		<![CDATA[
		 select * from (select ROWNUM as rn, c_no, title, content, reg_date, (select nickname from members where nickname=community.nickname) as nickname from community community where ROWNUM <=(#{cri.pageNum}*#{cri.amount})) where rn >((#{cri.pageNum}-1)*#{cri.amount})
		]]>
  	</select>
  	
  	<insert id="insertCommunity">
	      INSERT INTO community(c_no, nickname, title, content, reg_date) VALUES(seq_c_no.nextval, '민주쉐이키', '쉐끼쉐끼', '존나화나네', sysdate)
	<!-- #{nickname,jdbcType=VARCHAR} --><!-- #{title,jdbcType=VARCHAR} --><!-- #{content,jdbcType=VARCHAR} -->
	</insert>
	  
	<update id="updateCommunity">
	      UPDATE community SET title=#{title,jdbcType=VARCHAR}, content=#{content,jdbcType=VARCHAR} WHERE c_no=#{c_no}
	</update>
	  
	<delete id="deleteCommunity">
	      DELETE FROM community WHERE c_no=#{c_no}
	</delete>
  </mapper>